# 美股投资 Agent - 项目交付说明

## 项目概述

本项目是一个独立运行的 Python 程序，用于美股投资分析，结合技术分析和市场消息面提供中短期交易信号和建议。

## 核心功能

### 1. 技术分析
- **趋势指标**: 移动平均线（MA 5/10/20/50）、MACD
- **动量指标**: RSI（相对强弱指标）
- **波动性指标**: 布林带
- **成交量分析**: 成交量比率
- **风险指标**: ATR（平均真实波幅）

### 2. 消息面分析
- 获取股票相关新闻（Finnhub API）
- 情绪分析（关键词方法 + 可选 FinBERT 模型）
- 正面/负面/中性新闻分类
- 综合情绪得分计算

### 3. 交易信号生成
- 多因子评分系统（技术 60% + 情绪 40%）
- 五级信号：强烈买入、买入、持有、卖出、强烈卖出
- 动态止损位和目标位
- 仓位建议和风险评估

### 4. 报告输出
- 彩色终端输出
- JSON 格式报告保存
- 支持批量分析

## 文件结构

```
us_stock_agent/
├── main.py                    # 主程序入口（可执行）
├── config.py                  # 配置文件
├── data_fetcher.py           # 数据获取模块
├── technical_analysis.py     # 技术分析模块
├── sentiment_analysis.py     # 情绪分析模块
├── signal_generator.py       # 信号生成模块
├── report_generator.py       # 报告生成模块
├── requirements.txt          # 依赖包列表
├── README.md                 # 完整使用文档
├── QUICKSTART.md             # 快速入门指南
├── .env.example              # 环境变量示例
├── data/                     # JSON 报告保存目录
└── cache/                    # 数据缓存目录
```

## 技术栈

- **Python**: 3.11+
- **数据获取**: yfinance, finnhub-python
- **数据处理**: pandas, numpy
- **网络请求**: requests
- **NLP（可选）**: transformers, torch

## 安装和使用

### 快速开始

```bash
# 1. 安装依赖
pip install yfinance pandas numpy requests finnhub-python

# 2. 运行分析
python main.py AAPL

# 3. 批量分析
python main.py AAPL MSFT GOOGL NVDA
```

### 配置新闻 API（可选但推荐）

1. 访问 https://finnhub.io/register 注册获取免费 API Key
2. 编辑 `config.py`，设置 `FINNHUB_API_KEY`

### 高级功能

```bash
# 使用 FinBERT 模型（需要先安装 transformers 和 torch）
python main.py AAPL --finbert

# 禁用彩色输出
python main.py AAPL --no-color

# 查看帮助
python main.py --help
```

## 测试结果

程序已通过以下测试：

1. ✅ 单股票分析（AAPL）
2. ✅ 批量股票分析（TSLA, NVDA）
3. ✅ 技术指标计算
4. ✅ 信号生成
5. ✅ JSON 报告保存
6. ✅ 彩色终端输出
7. ✅ 无新闻 API 情况下的降级运行

## 输出示例

### 终端输出
- 基本信息：股票代码、公司名称、行业
- 价格信息：当前价格、涨跌幅
- 技术分析：趋势、RSI、MACD、布林带、成交量
- 消息面分析：新闻统计、情绪得分
- 综合评分：技术得分、情绪得分、综合得分
- 交易建议：信号、建议操作、止损位、目标位、仓位建议
- 关键提示：关键观察点和操作建议

### JSON 报告
保存在 `data/` 目录，包含完整的结构化数据，方便二次开发。

## 配置参数

所有配置参数都在 `config.py` 中，可以根据需要调整：

- **技术分析参数**: RSI 周期、MACD 参数、布林带参数等
- **评分权重**: 技术分析 60%、情绪分析 40%（可调整）
- **信号阈值**: 买入/卖出信号的得分阈值
- **风险管理**: 止损百分比、ATR 倍数等
- **输出配置**: 彩色输出、JSON 保存等

## 特色功能

1. **智能缓存**: 自动缓存数据 1 小时，减少 API 调用
2. **降级运行**: 未配置新闻 API 时自动降级为纯技术分析
3. **批量分析**: 支持一次分析多只股票
4. **灵活配置**: 所有参数可自定义
5. **双模式情绪分析**: 关键词方法（快速）+ FinBERT 模型（精确）

## 适用场景

- **中短期交易**: 持仓周期 3-20 天
- **波段操作**: 捕捉趋势性机会
- **辅助决策**: 为投资决策提供量化参考
- **学习研究**: 学习量化交易和技术分析

## 注意事项

1. **数据延迟**: Yahoo Finance 数据可能有 15-20 分钟延迟
2. **API 限制**: Finnhub 免费版有调用频率限制（60 次/分钟）
3. **仅供参考**: 所有分析结果仅供参考，不构成投资建议
4. **风险提示**: 投资有风险，请根据自身情况谨慎决策

## 扩展建议

### 短期优化
1. 添加更多技术指标（KDJ、CCI 等）
2. 优化情绪分析算法
3. 添加图表可视化功能
4. 支持自定义评分权重

### 长期扩展
1. 对接券商 API 实现自动交易
2. 添加回测功能
3. 支持其他市场（港股、A 股）
4. 开发 Web 界面
5. 添加机器学习模型

## 技术支持

- 详细文档：README.md
- 快速入门：QUICKSTART.md
- 配置说明：config.py 中的注释
- 代码注释：所有模块都有详细的函数注释

## 许可和免责

本项目仅供学习和研究使用，不构成任何投资建议。使用本工具进行投资决策的风险由使用者自行承担。

---

**交付日期**: 2026-01-04  
**版本**: 1.0.0  
**状态**: ✅ 已完成并测试通过
